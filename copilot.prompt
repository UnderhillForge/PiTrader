Prompt for the Developer Agent:
You are an expert Python developer. Build a complete, production-ready, autonomous cryptocurrency trading bot in a clean VS Code project.
Project Name & Goal
Project: cbgrokbot
Goal: A fully hands-off Grok-powered nano perpetual futures trading bot on Coinbase Advanced Trade that:

Starts in nuclear aggressive mode at $250
Automatically switches to hybrid mode at $10,000 (10% aggressive sleeve / 90% safe sleeve)
Rebalances every Sunday at 00:00 UTC
Uses ATR for sizing, stops, take-profits, and trailing
Implements partial profit taking + pump auto-close timers
Rests idle capital in USDC for yield
Runs 24/7 on a Raspberry Pi 5 + 7" touchscreen
Has a beautiful local btop-style live dashboard
Requires zero human interaction after initial funding and starting the services

Tech Stack

Python 3.12
coinbase-advanced-py (official Coinbase SDK)
openai (for Grok via xAI endpoint)
twscrape (for X/Twitter rumors + whale accounts)
websockets, asyncio, sqlite3, python-dotenv, requests, dateutil
textual (for the rich console dashboard)
Systemd services for auto-start on Raspberry Pi or similar environment

Core Features That Must Be Implemented

Portfolio & Sleeve System
Nuclear mode (< $10k): 10% risk per trade, all alts allowed
Hybrid mode (≥ $10k): 10% aggressive sleeve (nuclear rules), 90% safe sleeve (BTC/ETH/SOL only, max 1.5% risk)
Automatic rebalance every Sunday 00:00 UTC
Tracks state in portfolio.db

Dynamic Basket
Auto-fetches top 40 perpetual futures by 24h volume every 6 hours
Subscribes to WebSocket ticker for all current basket assets

Risk & Trade Management (ATR-based)
Position sizing using ATR (6h normal, 1h for pumps)
Dynamic stops & take-profits
Partial profit taking (50% at 1.5R, 30% at 3.0R)
Trailing stops with activation threshold
Pump auto-close timers
Safe sleeve restrictions enforced

USDC Resting
When decision="hold" or idle → close all positions and convert everything to USDC

Park / Resume Mode
Big button on console to flatten everything and pause trading (for transporting the Pi)

Console Dashboard
Textual-based live dashboard (btop-inspired)
Shows equity, positions, new alts, spikes, parked status, sleeve info
PARK / RESUME buttons

Services
Two systemd services: cbgrokbot.service and cbgrokconsole.service (auto-start on boot)


Deliverables
Please create the full project with:

All files listed above, fully functional and commented
Complete requirements.txt
.gitignore (venv, *.db, *.log, .env)
README.md with setup instructions for Raspberry Pi 5 + 7" touchscreen
Systemd service files ready to copy
The current Grok system prompt (I will provide it separately if needed)

The bot must be 100% hands-off after startup. The only human actions are:

-Funding the Coinbase account with USDC
-Starting the services once